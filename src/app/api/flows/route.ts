import crypto from "crypto";

export async function POST(request: Request) {
  try {
    const body: any = await request.json();

    // const { decryptedBody, aesKeyBuffer, initialVectorBuffer } = decryptRequest(
    //   body,
    //   "mDZs3k0V/AyzOS8fVpg66pK0v0ZK2wF1b870UZSnH7xDIWUmcT4Wcns3FjD/17tzQoMMYz/ZBmSJO6YX+tiXzubaErnSkY5wyTL5Cu5yVyZ8/ru4LcV1IL7yc6L90KY1FuqpyJyrrXPlD6rDcKU3p7D51hCk/UmgPfoAB5IDclrM01FieXuXF/4Y/71tn9wxGp1xJXTzCHhQ6CXJFhyhqaf+9Yq3k4tyIw/7CSfS0wcRNy6xrCCUje5H23CInRildI+VwcyeLLmzBsGUbsWoZAnNxfZcGIMSbHn6HS5RNj9lXQMBqzKfe9qa9rkzlEjsVC/wEzFdOQVWXQLV6uK8sw="
    // );

    // console.log(
    //   "LOG DE BODY DECRYPTED EN ROUTE TS: ",
    //   JSON.stringify(
    //     {
    //       decryptedBody,
    //       aesKeyBuffer,
    //       initialVectorBuffer,
    //     },
    //     null,
    //     2
    //   )
    // );

    // // To navigate to a screen, return the corresponding response from the endpoint. Make sure the response is enccrypted.
    // const SCREEN_RESPONSES = {
    //   buQbHIRIJvJD: {
    //     screen: "buQbHIRIJvJD",
    //     data: {
    //       PGWWEh: {},
    //       ycJGAu: {},
    //       createdAt: "2025-12-10T11:58:03.235Z",
    //       target: "none",
    //       phoneId: "none",
    //       provider: "whatsApp",
    //       idSocialNetwork: "none",
    //       idWafSchema: "IWD7LsPbdxbEcNx3BgGspexx15X01oCJ",
    //       version: "3.0",
    //       parentId: "none",
    //       configType: "none",
    //       configurationId: "none",
    //       extra: "{}",
    //       fBpiyi: "Enviar",
    //       GSHUVD: "Formul\u00e1rio",
    //       ItGKfI:
    //         "iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3Xf4JFd95/vPqe5fnhmhMCOCwAJs47VZYwN313v37tr3OuyzDnuf5T7ItshBEggxSqNA8jAgIQRCkpHACCEEBhsjHMA2BiyQsNfP7jqt1wGBjYSkmd9o5jc5/UKHOuf+0d2/rg7Vsaq7wvv1PH6mu07X6SqZme+nzjlVbZxzAgAA+eJN+wAAAMDkEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAwnvfvPXvahwBgeAQAAKPbufwy/Yv9wWkfBoDhEQAAjOaqx8936/ZWlbzD0z4UAMMrTvsAAKSUKf6m1v3v13yJAACkECMAAIZ3/VPXu9P2Z+RU0n0vOD3twwEwPAIAgOHsOfAcVfwbtO48yXD1D6QUAQDAcNbd19wx/5zaG0cAAFKKNQAABnfD8vu15l6gav2905GpHg+AkTECAGAwu574IVcw17jjvpEkOckZMQIApBQBAMAgjGaKD+q4PyMnydW3OksAAFKKAACgvxuXf13GXKBTtln85eRZFgECaUUAANDbjftfpFlzhTvktxR/OUmGAACkFQEAQLg98uTpT7XmjNZtfaMLTgGwCBBIKQIAgHDr++7TrNnhjgSu/ut/GkYAgFQjAADo7ton/0/NFV6j475Urld951o/QwAAUosAAKDTHhXdfPGPZZ1xx/zatkDxN42XGzMEACClCAAAOp1Z/ryZNWe7o77kS4HVf83i7+TrRc86Po3DAzA+AgCAVjc89bNa8l6mkpNO1m/6D877S/X37qh2y3bvBEDSEQAANO18dE4z+j0ZyR32JWc7i7+keihg+B9IMQIAgKaFuS9pRlu16qTVkOK/uRbAcQsgkGIEAAA1Nz71S1oo/Cc5yR2udq74l5rbnMRPAQPpRgAAIO05sKiC+5yMpBNW2mhO7Zu2+/8bf1oxBQCkGQEAgLRW/apmzZKs5I5WNze3Lfrb3F5/RQAAUowAAOTddcsXa7HwH6R68a/WynvX4u9abggkAAApRgAA8uzG752lee8+SVLFScdrD/3pWPEf+KP20sg5wyJAIMUIAECeudmvq6h5SXKHfMmGrPgP/OFk6n9aRgCAFCMAAHl17f7LtOC9VJK0bqUzfmt726K/1uIvWccUAJBmBAAgj657bIcWdJdM7a1bqf3aX8e8f5fi3zDrPAIAkGIEACCPvLlvaMbMSJJO1m7767Xi3zWSQvO9U2H16KQOF0D0CABA3ly3fJ0WvRdKkqzkjlQHWPGvzaH/+kjAST3ww+WJHTOAyBEAgDx551PPdvPmlsZbd6wqU24v82qp/MF5/8A0AMP/QMoRAIA8qbpvmKIpSJIqko4FFv71XPHfOg0giVsAgZQjAAB5cf3yHi2YH2i8dUcqMo3632fFvxTcLvmMAACpRwAA8uBd+57v5r13br7fcDIn6s/7H2DFf+c0ALcAAmlHAABywFW9h00h8Pd9pf68/8FW/HdMAxgCAJB6BAAg667fd7uZN8/efH/Kl9Yav/bXueiv8bbXNIDkCABAyhWnfQAAYnTj8r/WQuHKzfdO0uH6xP8Ai/5CpwH4HQAg9RgBALLLyDNfkxf4e37Ml8puqBX/3doMIwBA6hEAgKy6fvnjmjPP2HxfddLR6tAr/rsGAx4DDKQeAQDIomsOvFQL3htath3xparUbcV/UK9pgMY+ZVclAAApRwAAsmaPPM3Zr8gLVPaSk477al/xH3w9zDTAemWeAACkHAEAyJq1/Z/TvDmvZdtKtWPev/ay82p/gGCw9ow/fMZajGcAYAIIAECWXL/8k1o0L2/ZtmqlM42V/80/Bl7x3xEMeAYAkAUEACArLtOMivqS1DZ2v1JpvtbwK/6Dam2OWwCBDCAAAFmxbfkPNOed1bLtuC9t9H7Mb3P7YNMA4ncAgEwgAABZcP3eX9SS9wst23wnHaluvh3kan+QaQB+BwDIBgIAkHZ3LC9opvA7baP19dv+XPCuP0nDr/jvHDEgAABZQAAA0u6AvqxZs9SyreykY9WWyj/iiv+2diPHUwCBTCAAAGl23b5f0aL3f3dsP1SRAr/2O+xQv1ra2/pwYhEgkAEEACCtdj66TXPe/R1D/2tWOlWr/mFX+93aBp0GYAQAyAYCAJBW8/N/qhkz37LNSTpY2Zz3H+7+/sGmAXwVCABABhAAgDS6du8lWvT+bcf2k7607iJb8d+6f63NOEsAADKAAACkzdv3n6vFwt0dQ/9W0qFqpCv+u7XN+PwQEJAFBAAgZZx131DRzHY0HK1KlVr5HmWoXx3tXUND5WlfvPBkhKcDYEoIAECaXPPU5Wbee1HH9qqTjvo9r/bVpW2EaYAjch15AUAKEQCAtLjq8fO15O7sGPqXpJWqnO9GXtg3eDDwuAUQyAgCAJAW87N/pqKZ6di+4eRO+LGs+O/sg1sAgawgAABpsGv5Ri2YF3Rrcgcrsa3477I+gAAAZAQBAEi6dx74Pi2Ym7q2nfKl1eBDf4a7og8aJDSIAABkBgEASLqq/5CKptCx3UnuULVn4ZZ6X9EPGxqsPAIAkBEEACDJdu39gBa853VtO+bLlTRQ4Y5sfQC/AwBkBgEASKpdB35Ii8Vru7b5kj1cjXnFf9dgwAgAkBEEACCZjGb8r6vQ/e+oO1SV8wPvY1jx3/J9zTYCAJARBAAgia7f91HNe8/q2lZycsdr1X+UK3q1tA8XGqwjAABZQQAAkub6Ay/WvHdZWLNbqcq5nrfqxTYNULGGAABkBAEASJI98lSwX1XBdHven9yqlT1to13Y19LeMxi45x8//1gEZwkgAQgAQJKcXv5NzZvtXduc5A5WRyncUQWDY3pY1QjOEkACEACApNi17z9qybs4rNmd8GU3mqU7woV9g64P4BZAIEMIAEAS7FFRs96X5HX9qR/Jd7KHGgv/Jvfgn7b+mf8HMoQAACTBqX2/qznztLBme8TKVd2ohTuqaQACAJAhBABg2nYt/2dtLfy/oe0VJ3usOk7hjioYEACADCEAANN016NzmjWfDxn4lyT5K1U5G/+Kf7Xs3zU0EACADCEAANO0b+6PNGe2hjW7dSd7qn3h3+Qe/NMSGvgdACBTCADAtFy7779osfCzoe1Osgertdv/FF641aUtjmkAsQYAyJTitA8AyKU7lhc0732u19C/O+XLrrm4F/YN0z8BAMgQRgCAaXjKPKhZsxjabiX/kI2qcEezPsAxAgBkCQEAmLRdy6/Qkvn3vT5ij/qyZRf3FX2LfqFBrkAAADKEAABM0o3fO0vz5r5eQ/+qOlWP2M23o1zRq6N9/NBQ3HaKRYBAhhAAgEmycw9pxsz1+oh/yJes61m41aUt5mmA0xfef+HGSOcMIJEIAMCkXL3vzVo0L+71Ebfh5J+wURbuqIIBV/9AxhAAgEm47rEdWvJ+vefQvyR/xZdziVjx38LJMf8PZAwBAJgEM/uwZsxMr4/Y01b+GRv7Fb062gcJDdwBAGQNAQCI267l67VU+OGen3FS9aAffDv0FX1rd9GGBiuPAABkDAEAiNONB56jBfO+fh/zj/ly5c5f+xv2Vr241gcYpgCAzCEAAHFy/kMqmkLPz/iSf8SPpXA39x8vGMgZFgECGUMAAOKya//NWvSe3+9j1cO+bDUZK/7V0d5os4wAABlDAADicMPjL9CiubHfx1xZqh6zsV/Rt3znCKHBsggQyBwCABAHM/t1Ffr//arUf+1PGu2KXi3t8U0DePwOAJA5BAAgatcu36UFc0G/j9lVJ3u689f+Rr9VL771Ab58AgCQMQQAIEpXPf6j2lK4fJCPVlf82At3VP3PVrgNEMgaAgAQHaP5ma/Jc33/XvnHrfx1F3vhjmh9QOkFXzrv9ED/BQCkBgEAiMquffdrwXt6389ZqXLYj/2KXi3tY4UGbgEEMogAAERh5/6f0FLh1YN8tHLEl6vUXk/uUb5jjSYw/A9kEAEAGNceeVp0X5bX76d+JFeRqkc7f+0v7kf5jhkMCABABhEAgHGdWX5AC945g3y0suLL2WQs7Bt8fQCPAQayiAAAjOO65Z/SFu9lg3zUrjlVT9kkXNG36PfdPAQIyCYCADCqyzSjGX1R6j/0LyeVV3w5l8Sf+u393SIAAJlEAABGtXX5S5rzzhrko/4pK7tWK6ejD8U32ic7DWAddwEAWUQAAEZx7d5f1BbvPw/0WSeVV2zPwi11L8692ia1PsBjBADIJAIAMKw7lhc0V/ydAQb+JdVu+7MVTbxwj9q/WtolFgEC2UQAAIZ1QF/RnJYG+airOlWOaCKFO7b1AY6fAgayiAAADGPXvl/VoveTg368fMjJ2mb5ndKjfMf6bt/OEgCADCIAAIPa+eg2zXufHHTo35acqiespPEKd3P/qawP8P/Ni7YeH+yMAaQJAQAY1Pz8g5ox84N+vHzQyrlkLuwbov+j2i076DkDSA8CADCIa/ZeqkXv3wz6cf+0U/WMm2bhHqp/dbRvtnELIJBRBACgn50Ht7tF7+5Bh/7lpNIhO5HCHff6AMPvAACZRQAA+lmofsPMeDODfrxyzMrfCC78i69wh/U/zncH9/d5BgCQWQQAoJdrlq/UgvevB/2486Xy4cbCv8Qu7BumfwIAkFEEACDM1U8+Q0vebQMP/UsqH/Zl/UQU7kj6NzwECMgsAgAQws0U/kxFFQf9vC07lY+7RBTuPgv7Bp5mcM5jESCQUQQAoJur973LLHk/MMwupYNWziZ/Yd8w3y2mAIDMIgAA7d6293naUtg9zC7+qlPldPP9KFf0Uvv+058G8JkCADKLAAC0s4VvqKjCMLuUVoJP/BttKD6J6wPE7wAAmUUAAALstXvv0KK5cJh9KsedquudBbghaQv7hlof4OYIAEBGEQCAhiv2/oi3VNw5zC7OShubD/2Z/hV9y7GN/93u3MLi0WH+ewBIDwIAUGO0xXtQheH+TpSPWNnqBIbi+/Qf03ef/OEHVB7mvweA9CAAAJLstft+QwveM4bZx1Wk0tFm+YxzKH5K6wO4BRDIMAIAsOvAS7wl79Jhd9tYsXJ2IkPxEw0GAcz/AxlGAEC+7ZHniv5XVTBDPO9P8jecyiddogp31OsDRAAAMo0AgFyzp/b+tlnwzht2v42DyfmpX7W0R/fdVh4BAMgwAgDy65rln/S2FC8adrfKSafKqpvkUPxURhP4KWAg2wgAyKfLNKN580V5GmroX05aP2SDb2Mfip/WNIPvWAQIZBkBAPm0bd/vac48bdjdSketbHmyQ/FTXB/ACACQYQQA5M+1yz+vpcIvDbubq0obR1yiCnec6wM8GQIAkGEEAOTLXY/OuTnz+SEH/iXVnvhn/WRc0aujPfrv9h0jAECWEQCQK+7JhS+bObNl2P38ktPGifbCPP1b9eIcTSg47gIAsowAgPy4avn/M1vMT4+y6/pBbVbYSQ/FT2uaYa0yTwAAMowAgHy47h+WtGg+M8rQf+W0U+WM61lY1aUt5esD1n/xD7U24H8iAClEAEAuOJ37oObMwgg7an2ls0A2mxP9KN9xvpurfyDjCADIPP/qfa81S+bfjbLvxnGnaslNpHAnbH0AAQDIuOK0DwCI1TXL53hL3j3DDv07SdZ32jg09aH4WL+7R/8EACDjGAFAthXM182MmR1mFyfJOWnjsJH1XX3b6IVbXdqmPZrQP5QwAgBkHQEAmWWvWt6pJfPjw+xTK/5GflkqHbOpK9xRrQ+QLAEAyDgCALLp+ieebraYDw0z9O9crfg7SRuHXO19Qgr3pNcHWFfgdwCAjGMNADLJaeZhM2MG+t93Y8i/UUirq1L5lBu5eMZRuMP6H+e7e50bIwBA9jECgMyxV+17p1kyPzTIZ4PF3znJOml9xY59Rd/xHZpM4Y6wfwIAkHEEAGTLrse/z2z13j3IR2vF32wWfyepfNLJ33DNdo02hz7Fwj1y/63nxiJAIOuYAkCmOG/mYVM0hb6fc4HiVy/+1hqVDvupK9xxrA8QvwMAZB4jAMgMe83yLWbJe26vzzjVhvltW/F3zqh81MpW0le4w/of57ur/joBAMg441z7PyVACt3w1As0p0dUCA+1zYLfHPKXasXfVqXVx3zZ4PaQot4onmFtLvh9Q7bF/d2D9G+kyi9+YX5OriNnAMgQpgCQCU7uIVMwfYp/21V/YNvGYSvrgp+P7x77aYwm9Os/yEpHKf5A9jEFgNSzu5bvNovmmWHtwfv7g0P+jW3+ulQ9Wat34wzFJ3F9gDraB/puhv+BHCAAIN12Pv4is+hd3q3JKXy+vzkCIJUP2aEL67Sv6FvPM/LvJgAAOcAUANLMuMXZr5lCW0VUs7h3m+8PFv/KGafquouyeLa1p/H5AY4AAOQAIwBILXvt/t80C+b89u3Nq3zTMt9vnZFVPRjUpwXKhyfzU78dx5eg0YT2/i0jAEAuMAKAdLr60L/ztplXtG/udn9/+1V/o/BVjlvZcuC6V8MXz5bvzsj6ADnD7wAAOcAIANLnIhXsfPnL8poVsnaF33++vzYqYOSqUuWYre+b1KH4aYUSpgCAPGAEAKnjnr38BW/eO3vzvTTQfH+wvXLUl/OTVbj79d/y3yDG72YKAMgHRgCQKtWr9v6stnr/tfG+eZXfZ74/0G7LUuVEcq7o1dE+3VDCLwEC+cAIANJjj2YLC4XfM/WaNcx8v1xzW/mw7VIckzgUP/p3j9O/4XcAgFxgBACp4U4t/5GZN1trV/hDzPc7bY4G+GuSv9osf0keip9WKPFsmQAA5AAjAEiHa5b/q9nm/VxrcW8WxF7z/cFtlcPV2ucVXljVpW3ahXuCocSdfXzLMQHIPEYAkHzX/cOSW/A+64yGnu9vjgwY+SetbLmzCDYkbSh+SqHk+E89rKoAZB4jAEg83539VW9Gi12f5y+1bmub798sdr5UOWrjLp4D96+W/RM1msDwP5ATBAAk29X7X2XOKvxftl7Ues/3NwuigsXfSdXjtn7bX1PCh+KnEkoIAEB+EACQXFc/8TR/YeZejTjf7+o72IpUPWE3u03JUPxUQol4BgCQGwQAJJZfnH1Qs2aucz5f9Sv8bsW/bZpAkn/Utn5enYVVXdqmXbinEUoIAEB+sAgQiVS6avkKLZmXtgz5B4q7Vf02wM32bsXfyK5L/hk7VGGd9hW9Wvaf7Hf7PAYYyA1GAJA8163sKGwp3D7qfH9wH/+InVjx7Ne/WtqTNZqw2b9z/BAQkBMEACROxfkPqWBmasV9uPn+luJ/xsmW7MQKd1j/43z3pEOJEU8BBPKCKQAkSunqfddoyfxIo5APcn//5jP+N7dJzkr2qL/Zb9YKd7/+Rz83pgCAvGAEAMlxw75neovFW4e6vz/QHlwPYE/6clWXusI97fUB1vFDQEBeEACQGGXr/bkKptha/Aef79/c5hvZEzaVhTus/3G+e5hzK7gZAgCQE0wBIBE2rlzerYXC83sV/9rqfyPrehR/GdljVTnLwr5R+q9sE4sAgZwwzrX/MwZMVukty99vnlb8ji2oIBcoUC3Fv33IX1K32/5KTnZ/dbO4hRW+ZvvwbY3CGtY27nfH3X+PtjOvfqCwdbD/rwFIO6YAMHVusfANV1Bh1Pl+BbcdDT7xL/yKWF3apnHFHWX/EZwbw/9AjjAFgKlav3L/nVowz2kO+ZvNB/10Lf6utfjXFq7Vt61ZuQ0bVtwkjVZYk1K4w/qP7twIAECeMAKAqTlz5coLZ7YW32qda72ql1rWAGhzW+d8fzMMOLmjncW/YRpX9GppT0Mo4THAQJ4wAoDpMDKFWfugNc7rPt/f3NZyf7/rUvwluVOufttf/MVTHe3TLtzR9C+eAQDkCiMAmIq1K5/6pOa9p48139/4nJXcSTt28VTL/ukp3LW2SM6NAADkCAEAE7e+c/9PmK3F19jAFby6Ff+QIX+1bzvhS379GjYTQ/GjhJLxz03O4xZAIEeYAsBkXaSCnSt82RqZYHEf5P7+4JSAbUwTlJ10yk9c4e7Xv1rakxFKfEYAgFxhBAATtf7MA5/TnHdOs7i3D/lL3e7vD3smgDleTUTxbG8L6z/O746gfwIAkCMEAEzMmbfu/3+0rfhySaPP9wf20YaTW3eDFrdA+/DFUy37J65w9+xfHe0h3+0IAECeEAAwGXs0a+YLf2CNpG7Ff9D5/sA+5rg/dvFUS3uyCvekQ8kMIwBArhAAMBGrxw/8gd3ibRv6/v56uzbb6sXrtJXKVupT3NSlbdqFO6mh5Mw8vwMA5AkBALFb27n/F/ytxZ/vnNuXhpnvV2Mf38icrCaucPfrXx3tiQolpbd+VqcEIDe4CwDxukgL/lzh85tX6i2F3tRX9Hcp/q61+Ds17hQwcqercn5yiqda9k9tKOHqH8gZfg0QsTpz1YGH7VLhp1qK/wjz/Y195Dt5T1U2t9f26V74GsUzrK25//BtcX/3uP0P+92SypKWQ/8fCUmSC1wybf7Lafq8NoHPB/Ni/bUNbNrsv0efkuQC/QRf226XdAMeU8vrYP/BvgLHt3ncg/bvSXI66lX1c7vv0IkuR4oJYwoAsTl5+f6X6+ziT4073x/cxzvuK5hZMzgU37P/zmMf/7vrZiU9Twjl6gtYRyn4ocW12+sx+jcuvP+e+8d4TJv9OMlzupbinxxMASAeb3lki7dU/HSjeA/0PP/GZ7sVfyep5GTWatcdvYqburRNu3AnNZRgMJEWwvY++/Vv+vRv+vRvaq8b+zi1vQ70GVvxr238yO7b9EUhMRgBQCxOzZzzdTtjFjaLTaOo1//16JjvVyAcBNoV2FY47m/+45WUwp3m9QEYzFiFcBJX1pPuv9uURL99nL512uo6IVEIAIjc6lsPvs5u9f5traCPPt/fDAymduVftl0L2LSLZ5pDCXrIQHFOyDFvFIwuvv12rQuJwhQAInXqjcvnVBf0sV7F36ntef4uvPg7GVkreSerHQUsjuKpjvbkFO4oQwl6c3EV57iH+qM+5nH7r7VdtfuD+gchcRgBQKTsluLDtujNjnJ/f+fvAtT28U5X5arNsjXuVW/SCvekQwl6G6f4jbv/pItz7Mfs9Pvv/aDuERKJAIDInHjrgSvt1uKPRjHfv7mP71Q43f3X/oa96p104U5iKEFvkyzeUy/O8fe/XJ3RpUJi8RwARGLt6iPPKM3YvbZgii2FfjMEhBT/LvP9wfbisYrMmu1a3MIKX+N/0WFtzfbubeP2P83v7tU/ehtqVb4mW1zH3X/s4xu+T2uMfmbPrXpYSCxGABCJsqrftIVCR/FvFvd6YWvbFiz+wX3qnXYU/4Zhrnq7FcFxRhPC+h/nuyd5buiUsivrnn0m4ZiM0Xsp/slHAMDYTl2x8k5/a+EHo5jvD+4zc7IcSfFUR3t6CndU54ZwOVyV3xxZGGX/PsdkjP7i24/rvULiEQAwlpOX731edcvCu+1mcR9jvj+wj7dhZUrNEtevuKWtcE9yfQDCJW2oP/b+x+hzwP1P+L5e+cAD8oXEIwBgLP7c7EPWUyGK+f7gPsWT1WZfSk/h7te/Wtrj/26EyFhxTkpgcU5vuuk2PSmkAgEAIzt2xcHb/C2F74tivj84JVBY9aWqS2XhDut/nO8e9dzQ3SCFUMpecY67Tyd97KYP6PNCahAAMJJjVxz8EbtYuDqq+X419nHB2/7iL57qaJ9+4Y6if3SXmHn04OtRin/CAoUxeqS4oGuFVCEAYCSu6H3NesaLYr4/uM/MKV+ybuzi2XKsKSrcUZ4bWiXhyjp0n7iPadz+e/e5Ieni3bu1JqQKAQBDO/aWAx+vbpl5lnoV/yHm+xvbTFUqrDV/HT0Jc+iT7D+qc0OnRBfXkP4jKs6xn7ORrn3P+/X3QurwICAM5eRlR168sc39jfOMaRR6SSPP9wf3mTtelrdhQ4tbWOHb7DekrdnevW3c/qf53e39o1Oii39EfUZ6TEMcnzH68ntv1S85x//80ogfA8LgjEx5wX41WPydJNut+LvO4l/7bLdpAiOvbLsW/4Z+V729iqdC2vr1r472ZI8moNPYxbnfUH+v/s0A/bf3OeIxu26vA/u4YY5p8HPeX/X0Gop/ejEFgIEduXzlt/y5wvao5vsVaJ851fy1v7iLp1r2n37hjqJ/tEni1X6//hN4zD32tzJ69fvep6NCahEAMJDDl+/7D3Zp4Veimu9v7CNJhTVfpmLHLp5qaU9H4Y7i3NBmGoU0iYFi3P5793nTTbfoISHVmAJAfxep4Gbnv+QbYzav6kOKv5ORdYFpAWfUax9rpeKZ6uZX9Sqs6tKW5sId5bmhJmzYu+W12l5HMdSvHq/jKs7jHvPoxf+vDh/XTULqMQKAvg6dv/L71dni2Y0iL7UV8kZhbxT6QLvC2ut/zq5W5fkucYW7X//qaJ9OKEHTJK+sx9o/iVf7g/d/wjf65XvuUUVIPQIAejp02YGfq26b/S/dCr26bGt+Lny+f3ObLxVXq1Mrnv0Ka9JDCZqStio/+HrsYxr3+KLt8/JbbtETQiYQABBuj2bt0szvOqPI5vuD7XOny5KbTPFUS/t0C3cUoQRNqb6ybusnEccU1r9070236HNCZhAAEGrl8Mqf+AvFrb3m+we5v799HznJq1gV67f9NaR5KH6SoQRNGbqyHrr/SQSSwOvvzszrGiFTCADo6tCbDrysunXMhQgyAAAgAElEQVTmpzsK+WZxH36+P7ht/nT7wr/0DsVPMpSgKcnFeQqr8nv2Oeb+Jefpot27dUbIFAIAOqy8emXJP7f4WavmCn6pV3HvP98f3Ke47qtQsR3FbdqFOy3rA3IvY8U5aYGlY3+n626+Wf9byBxuA0SnbeZrftFbcK5ZtO1moe9d/J0zgVsAu+xjneZWGw/9mXzxTPP6AKj7bX7S+MPe/UYT0lb8BznmkP4bn6u//sr7btXdQiYxAoAWhy87+Jrytpl/H+V8f7B9ds2X8d1Eiqc62pMzmjBsKEF0xXXc/SMpzlH3GU//+2crejWP+s0ufgwIm05evvfsM3OLB/yCN9da3Meb71djH+u05ejG5sawwtoonqO0bX5fj/7H+e5x+x/luzHBQtjWz0D7xH1M4/Y/Wp9Wnn7u5pv1DSGzGAHApjVv8evVgjcn9Sruw833B/dZOFOVCX5G4YUurHiGtU37ir712KP7bgxRtKZ8ZT2JQDKxc/Z0C8U/+wgAkCStvGnlreUtMy9uFG21Ffph7u/vto9XtZottf7gTxIKd7/+1dI+ve/Oq6kXwuivrDv6jPSYxj2+WttfHzmiPULmMQUArbx6ZUfpnMKyLXozUc73B9uXTpZULNuO4pmmofiovnvQ/vMuCcU5af1P4JxPegX9+Hvfq8eFzGMEAKpu9b5pC53Fv1HIJQ093x9sL5ZdS/FvSNNQ/CDfPW7/qEtpcU7a9MQo+8vocop/fhAAcu7gZQevr2yZ/Vfdi/vo8/3a3GY0v1oau3iqpT1ZhTvqUJJrOSnOsfc/ZJ/1/e973836bSE3CAA5duCyA88pz8++r9fc/Sjz/ZuBwRnNrldVqLYO/Ydd9SatcE8jlOTZhJ9ul9ziP51jftT3dbWQKwSAHPNnig/7Ra8Q9Xx/Y5ustLBWSVzh7te/Oton8915FnchTHlxjnsEpOSsLrr1Vp0WcoUAkFMHLlu5qbxl9nlRz/cH2xfXKq1BYcpX9GrZP1mhJM9YlT/hPtv7N7rxllv0d0LucBdADh259PQPnlmqfNs3xmsW7wjm+wPtpup01smSFHiMWFyr7nu1xf3d4/avQB95lPYr60kEkpiL/1dvuVk/z9P+8okRgBxamy1/wzdeaPEfdb5/s7A5aWmtKgXCZZqG4qPov/PYw787rzJ/Zd3W57j79z2+4ftcqZb1Oop/fhEAcmbfZYc+Wl6auUBSpPP9m4XNScWK02y58wd/2gururRNu3BPOpTkVdKKc+z9D9nnBI7J+tKrPvABHRRyiwCQI/svPfxj5YXimxpFW1Jk8/3BbYtrpcQV7iSuD8ilJBbnfv0n/JhHGo0w+sCtN+lBIdf4OeC8MDKVOfNV6xnTKOTWSVb9i79zknWm9tnQ4m/kZDS30bjtbzKFu1//amlPTijJIxcoTi7K4txvNKHflXnSiv+Qx9zx39S0vVbraxn9zdyMdgu5xwhATux78+FPVYrF8+OY798satZpYb0y0cId1v843z3JUJIXqZlH79d/Ekcohuv/jKxesXu3ykLuEQBy4IlLVn6iujj3qpbCLkUy3x8cCVhcr8qzzRKXtcLdr/9Bzy1vplUIR9lnysV5+P6H7/NN73uf/kWACADZd5EKbsfMl60nE8d8f2Ohv7FOCxvV2r4pK9yTXB+QN2m5sk5IcY77nD91y036LQF1BICMe/Kcww+UZ2bOier+/rBpgm1rFUkuUYW7X/9qaY//u/MmwYVwrD5jO6Z4+3/UVrRTQAABIMP2vuHQz2xsnX1ZHPP9wX2KVae5cjVxhTus/3G+e9Rzy5uEDXvHHyhC+p9EIBngmCrG0yt51C/aEQAy6pE9mp2dL/x+s3hHO98fbN+yXoqkeKqjffqFO4r+cyVFxTlp0xPj7t/j9Y23vEd/KaANtwFm1OKBw39YnSlsrRXtwFV7oJDXbgFUSHvrNisj26X4z5WqKlbt5vf2Kqzq0pbkwj1I/4OeWy5Mqzj3u7LuN5qQgOLvAvu0vA7s40Y5Z+lrt96sOwR0wQhABu29dOUX1xfn/lNc8/0KbNuyUVF998wW7nG+Oy9YlZ/IYz5ki3otj/pFGAJAxjzxOs1XlmZ+Z5T5/s2nAw64z9JGRZ51Ey3c/fpXS/t0Q0leJGYePWT/hBbnaPoP79PJ6vUf2M2jfhGOAJAxbu7I1yqFmaXN4lQv2moUcWms+f7GPsY5LZYqzW0xX9Groz05ownd+s+LpF1ZT/SYxu0/xmN20m233qwvC+iBAJAh+y458qsbi8X/2FLYA4Vckoa9v9+F7LN1vSwT6Hfzs439A69b27O/PiAvEl1cB+h/WsV5Av3/7WJR7xTQh3EuT/9kZdexVx7bduSswkqlqPm45vsb+xR8q/POrLf2o84iGNbWbO/e1iisYW1x9z/Od+dFQoe9R++zT//j7t/3+KLr84yTXnrre/XPAvpgBCAjjm/V15vFP/r5ftX3cZK2rZdDi39DvwKZ5fUBWZe04jz1/tv6meoxebr81j0UfwyGAJABT7zxyGUbSzP/h60X7WZxViTz/cHAMFvxNVv1J1q4+/WvjvbphJLMy0BxTtoxj7R/+DE9cOsefUbAgAgAKffo6w9uryzM3dUo/nHM9wf73LpRiqV49iusSRtNaO8/61iVP2D/MR5zn/0fWy/oEgFDIACk3ezMQ9WCNxPXfH+wfalcVdG6sYunWtqnW7ijCCVZx6r8BB9z7XVFVq/88Ht0SsAQCAAp9tgbD+1aX5x/YXshj3K+v7HNOGlLqfkT4r0Kq7q0TbtwxxVKsm5ahXCUfRJanOPv0+kdt96k/ylgSASAlHr0kv0XbMxvuWWQufvNItYo9APso5ZtRltLJXmu89f+pl24+/WvjvZ4QkMWJWHYO6zPcfefWHGOuX8j/elCUR8SMAICQEr53sJDvjHFxj8cUc/3N7ZLRp5vtVRp/bW/aV/Rq2X/6YWSrEpbIezVZyKOadz+u/d5uOTrte9/j5o/xgEMgQCQQo+94ch7NhZnfyB4he4kKbT4Dz/fH9zn7FLwtr+mcYtnmtcHZBlX1kPuP51A4VxBr7/jPTogYEQEgJR59LJDz1+fn3t7eHGv/QvRq/j3m+8Pts/4vubrt/01JG0oftKhJLNSVJyTtvAv0mMa7Phu/8Bu/bGAMRAAUqZqZh7yPVPoHL5vLeRqFPKQ9p6BIbDP0+q/9rf5mR5XxEkr3HGEkszKcHFOVP/RHNP/WvL0dgFjIgCkyL9ceuRDG3Ozz4lzvj+4bbHsa9b6zc8kpHBPa31AVrEqP7nH3GX/VevpFbt3q3lLDjAiAkBKfPuNx19YmZu5yrp45/sV+HNbufHQn8kU7n79q6V9et+dJXEUwqkU0iQGinH779aP0xW37dZ3BESAAJASrugerBrPay3utX8VehX/Yeb7raRjK8f1vScO6p/3HdKZjcZFRutVdXCb6/hE+Gc7t7YW5UH3b77zWra7Ab+r13G199H7vLob9LvCv6H/Z3t/V1gfYd8Q8lnTsaVvv5I0u1jUM19wnp7+g+epoLmexU/KUHGO/5i/8IH36FMCIkIASIHvvvHofRvzs0+PZb7fOh08eExPPnlQj+w9pGNnNtq+fbACE14cwraHla5hAsBoYWPQ7xqoSI71Xc3t/b+r+/ZRAkAc31Uoejr/B7bpwpdu1wUvPFumYLR2RDp9MLpCmPDiHHf/3/NKPOoX0SIAJNxjrz3yktXF2ddFNt/vJOecDh04ru9+7yn905MrOhW40h/8OrdplH1GNcoV+WSPcBhxncPkzvecC5b0fS/Zrgtfcp5mF1v/OSmvTe/Ketz9EzY9UXVWr3z/+3VSQIQIAElm5K1fOvNV3xjTvfgPPt9fqfrav++wvvfkih7Zd1hnSpXw7x3gwKb/2UlK5jnE903drv6bFs+e0/f92Ll63k/s0JZz57v24CSVVps7J/bKOonH1H58Ru/64Hv0PwREjACQYN9+/bHPbRRnzht1vr9S8fXU3sP6zuMH9K3lI9qoVOs9dx8ens6VfHSfDB+SH7ffcY8grh4mF0xmF4p69ovO1YUv2a5zL9wqE9Jdo3BV1iXna+zinLSh+tiPr70foz978lv6oIAYEAAS6juvP/KTa/NzLx92vr+0XtHjjx/Qo3sP6dtPHVO56k/oiJN5lRyfdJ7vMEdSm9c/S8996XY964XnyCt039t12Vw+o+zN0w/Z59jHZHTYky5+4AFN6i8xcoYAkER7VCzPFL9kjTGDzPdvrJf1xOMH9cjjB/TtA8fk28ZNb92v9AfX/7PTGTWI/yo5WaMhkx0VOOeCJV344u268MXnaXbLTOje3Qp/Q2k12cU5EYEi8LpL8XdWeuMHd+spATEhACTQt/cd/2JpbuasXvP9Z06t6oknDumf9x7SI08dl3Wb/3yk9HozOUc9uvSe79LT5vScHz9Pz/8352vL9u7z+g29Cr8ztf+NVtaU6qH+qS/8k379Q7v1hwJiRABImG+/9sgvnFmc+4Vuxf/0iVU9+r0D+sfHV/S9wycVXcmfbOGKp/R173WYrcP0O26v4xpuxUb3z84uFPXMHz5bz33JDp3//We1P1ahRb+iH1RZawbVqcyj9+s/4YHCGP3jkvQ2ATEjACTIE6/T/MZs8fNWzaf9HT1yWo89fkCP7D2ixw4PcxfQcOVocsUrvVfJo0nW+RrP6Pznn6ULX7Jdz/7R81SY7VH1NVzhbyifGaMQthXUgfbpsX8iiv9wfa5a6aLdu9X+QA4gcgSABFn1TvxJuVhcOnr4lL7z3af0d48f1MFT6xF+Q1zFaAKFK/a9TJdXUfQ7qZ5693bOBVv03Bdv14U/vl1zW2ZGKuyDtDtTv/1vCsU7luI/4UBhpZ0f4lG/mBACQEL8068+9uzvHq2e99ffOfCPh8+smap1Zedc+dyluXLFd+WK9ctl35V937bdwG9C3o07AhBFaRq0j7DPjXo24+01ah/dPznuMfS+Qu+5pzGFH/7pC1723Jfs0NbzFjaLjgv5fBShwFmpshH4nuRcWXeOLCRvNOF3P7RbnxQwIca5sH8OAKTZ79yuZxurvXFe7bcrnZZOPJnI4jpy/5MIJE7aZ6Ufu323jgmYEEYAgIyyTju8kAIeVygorya0+E8oUIy4f9VJv0Lxx6QRAICMKkg7guN7UV/td2svrXXfJwnFOWkL/xr7OKN3f+jX9N8FTBgBAMgoW9VzTDG+q/32NluVquttbSktzhM85j/f96/0fgFTQAAAMspaXTjJKYBy29P/srAqP+b+j1edXvXAy3nUL6aDAABklHO6oOV9zFMApeDT/yY/j562tQPOSq+7c7f2CpgSAgCQUUZ6hjS5KYDymc7tcRfvFA31t7+++/Zf05cETBEBAMgoa7S938/2DtsW1m4rkl9OxJV1aJ/j7h/h9MQ/ua26QcCUEQCAjDKezgm+j3MKYGM15uKqMfsfss8Yj2nDGV18+9WK8hGfwEgIAEBGGU9bpclMAVRWG18af3FORKAIvB5qf2nn7e/SPwpIAAIAkFGmoKWwAh51KCjXn/+ftOKcsIV/v/ehd+leAQlBAAAy6DO3ackrdv79HrXw92rzS5JfTX1xjrv/fc7qUgEJQgAAsmheO1StvYx7CmBjdcBCmtziHPfCP98avfoOHvWLhCEAAFnka0ccV/vd2kOH/4Ovu82dKxHFOfZAYY323PFOfVNAwhAAgAzypO2uy/Y4QkFlfYRCO2RxHXf/KY4m/Lf9L9D7BCQQAQDIIOfrWSrUX0cwzB/WVl2vzf9LSuRQ/ZTvRDjueTzqF8lFAAAyyDpdGPYQICm6KYBS++1/cRT/CQWKcfdvf+2MXn/bO/SkgIQiAABZZFt/B6Ah6imASnD+P91D9YOPJgyyj9FH73iHviggwQgAQAY5p2c0aldcUwDWSeW1ZBTnhAWKb2lRuwQkHAEAyCBXGP0ugH7tjbbqmmSt0lac456e2LCeLr6TR/0iBQgAQAY56eyu2yOcAijVh//b2xNTnPv1H0Ofcrr6zrfrHwSkAAEAyCDj6azG67imAMqrwxfvKa/Kj7V/6/QHd75LHxOQEgQAIIO8ohbjnAJwViqvK1Wr8mOdnvC0XDW6RECKEACAjPn4x3XWnGk8BaBVVKGgvBbYLk194d/Q+0R7TNaTXn3323RUQIoQAICMmd3QDnnN93FMAVTO1Nul1C38G/v42vtxeu+H3qGHBaQMAQDIGCdtN4ruar9bW2ktofP0Efc5wP5/sf8Feq+AFCIAABljvPBbAKMIBdZKlVL3/ZK2Kj/m/k9UpFfyqF+kFQEAyBjn6XzjAu8jngIon9FmdUxwcY5/ekJ609086hcpRgAAMsZUdKGK8U0BVFbbPpOBof4R+r/nzrfr8wJSjAAAZEzV6oJCjFMApdXm64jm0Xvun4ji39rPI+sVXSMg5QgAQMZ4Rs8Mvo9yCsBWpWqlsy2q4p2CtQMlW9DF97xdgRshgXQiAADZs12KZwqgvCrJJWOoftz9Rzk+I1374Rv09wIywOv/EQBpYos6p9ddAP3aerWXV9uK6xTn6V2gz66vw46p32hC2PE5/cmdb9dHBWQEIwBAxhjT/B0AKdopgNJq40timKdPyNx/yP77i/N6jQvsBqQdAQDIFmOMFqXopwD8suRXlJyFeXH33+zH+p5efee1OiIgQwgAQIbcd5/Olhc+tTdOKGj8/G/CinP8gUK6+a4b9ZCAjCEAABni+9rR/itAUU0BlNcSWJzj7/+vNs7lUb/IJgIAkCEFpx2N15FOAbj6HQDjzaNPp/iP3ucJz+iX77lUFQEZRAAAMsQ4bbcjFv5ebdWyZP14Fv4NvY8mEyic0eV33KgnBGQUAQDIEGd0fsj2Xvv0bSutJmOoftz9B70TwUn3fvhGfU5AhhEAgAyxVs8x9SWAUU4BlNtv/0vBwr+R9zf6rl/iUb/IPgIAkCG2qgu8ufD2UUNBy/x/wobqo+g/sE/Js7roI7t1RkDGEQCADHFGzwjZ3mufnm2Vdcm5hBX/mAKFPF13xw363wJygEcBAxlivNa7AAZ59G+/tsqZiIu/Ue9Cbfr0H99owlc+fIPuFpATjAAAGWKMzh13wV+7xgOA2j+TmqH+wfpc8axe5wJdAllHAAAyxHna1q2OjxoKrKTyRo+5c8Vc/CcTKKykV975dq0IyBECAJARX/iCCsar/Q6A1Luw92vfHP5flZzVdFflh72OajTB6f0ffpu+LiBnCABARhw9qnO9gkzkt/9NuXjHPH3w16Vz9W4BOUQAALJiRjtcyAz2WLf/KaKFf+39jNtnl/6H3P+kK/KoX+QXAQDICM9oezAAjDsFYK1U3UjQUP0w/Q/W5+V37dLjAnKKAABkhLO1WwCjmgKortZWx3Vrm+QT/eIIFFb65N036LcF5BgBAMgKL9opgNJql88k8Wp/+P4fXTK6SkDOEQCAjHBWzwybC+/6+T6hoLzW9rlpFP/o+ywZp4tuvUGnu5w2kCsEACAjrK9ne8VopgCsL1U2NI1V+bH274xuvOsG/Z0A8ChgIDOMnjnOY3+D7ZUeT/9rFGGnHq+nUfxN7/6N0Vc/cr1+vft/BSB/GAEAMsJJO4I1fpwpgMb8/yQX/nXsM+T+fY5pxTc86hcIIgAA2XGuFM0UQHk12Qv/htzfOulVH7lOB0NOG8glAgCQFZ7O6jXMH6a9zVakauPROBlY+GekD951vR4UgBYEACADPv5xzaioheC2UacANm//S8jV/pj9/8156/q17mcK5BsBAMiAclHbvS5Fst0goaDx/P9UFP/efZ5RUa/YvVvlnicN5BQBAMgAJ20ftfC3t5XXJlKcYw8UxtOb77pG/9JxwgAkEQCATPC82mOAg0aZAvBLkl9VR0GVEnC136//YD+ePn3XLn228wwBNBAAgAwwpvkY4HGmAEprGrt4x3Wb4BB9PubNaWfvMwVAAAAywLlopgDKq5Mdqh93/y7HVJHRKz78Vp3qdq4AmggAQAZYp6ebLkV+2FBQWq+/mObCv5A+Bzkm5/S2j1ynv+w8MwDteBQwkAFOevbma9P8v47P9WirbEguOP8/6sK/fvP0I04FbBZ5dX9tjb720et1e+eZAeiGEQAgA5zVM12hR/sAIwEt8//pW/h3yDi9lkf9AoMjAAAZYLrcBSANNwVQORPjqvx4A4VzRq//6C4e9QsMgwAAZMO5jRcjPQHQSeV1JftqP6R/Z3TbR3fpy13OCkAPBAAgA0yP3wGQ+o8EVNYl51qLa/t+U3yiX68+//bIqt4ZfnYAwhAAgJT71Kc07wqa79Y29O1/IxbvofdRJMX/jLN6xQM86hcYCQEASLljTtuDf5FHmQIo1Z//L8VfvMfdv7GvMbr8I9frn7ueJIC+CABAyhXrCwBHngJwUrVUfy0lauFfj/0fuPtafSb8rAD0QwAA0q6g7WH3vg0SCsqrkrMpWvjn9L3ivC4JPzMAgyAAACnn1HoL4LBTAOW1KRX/0fqsqsCjfoEoEACAlDPSjvrtcKF6tZVWu3wuKVf7ba+N0Ts+co3+Z/jZABgUAQBIOV/a0e13AKT+ocDa2k8At3w2icW/9uc3d5zRbeFnBGAYBAAg5YzVBQo8BniYKYDKqmSdmiv0x1iVH/o6ikDhdNgv6uLdu2V7nx2AQREAgJRzRs80Gm0KoPH8//bPTOmnfDtfm80/3nDPVTrQ/SwAjIIAAKSclc73RpwCKJ/p/FwcUwFjTR843fGRXfqj8DMBMAoCAJByxuic4PtBpwBsVfLLyZv7D+7jpH/cWNU7ep8RgFEQAIC08/Q0afgpgPJq8op/SxAwWrVOF92/WxvhZwZgVAQAIMVu+4yWvKJmR3kQUGmt/iKpC/+kK+65Vt8JPwMA4yAAAOm2o33DoFMA5frz/5Nwtd+l/y/8xjX6VO8zATAOAgCQYoXAY4CHmQLwy7U1AFN8ol+vPr9nKzzqF4gbAQBIMVfQDhc2/q/wUDDWz/8q1uJfdZ5eec8NOhl+VgCiQAAA0syNNgVQrt//P+yq/JbXMawdcNKvfewq/Y/eZwAgCgQAIMWstH3zdvkBpwCcq/8AUGNDhAv/OvYZbv8/O3aBPhB+FgCiRAAAUsyY8J8ClrqHAr8s+X6jgyne5te6/5FiRRc/8HL5AjARBAAgxZz0rI5tfaYAOm7/m/7CP+c5veGu6/VU7yMHECUCAJBi1upZnld7PegUQCU4/5+MhX8f/ug1+sPwowcQBwIAkGLGacdQTwB0tV8AnMJP+XZ/7fRPi0ZvCz8DAHEhAABp5uncbpvDQkFlQ/Ktpnm1H3y9WvB00e1Xab370QKIEwEASDNPZzVeDjIS0PfnfzWx4i95uvIjV+rb4UcNIE4EACClbv2CzvKkmWGmAAZ9ANAEHhH8ux+7UveFHzmAuBEAgJRy0vaw4t91u5Mq64p87n+E/fdVnS7rfuQAJoUAAKSUMdrRrKr9b/8rrzeL8LQW/smoaj39yid26ljvowUQNwIAkFLGaofM4Lf/lVc7t01h7v/dH9+p/x5+xAAmhQAApJQraHtwBKClrUsoKK9Nvfj/+fFn6f1h5wNgsggAQEoZ2/oMgJ4jAVYql7p/tmfxj27h33F5ehWP+gWSgwAApJTzaiMAg0wBlNe1WYkndptfoE/j6XUf26m9g5wXgMkgAAApZa2ebrzubd1u/2vZHkfxD+/z7o/t1Jf6nxGASSIAACnlpGcF63yvkYDSerM9pp/yDSv+31qyur7PqQCYAgIAkFKe0flS/ykAV5X8jeb7YJukKH7KN2yfDStdfPvVPOoXSCICAJBS1uhcM8CDgEprtaI86YV/zujKe3fqHwY/IwCTRAAA0skY0/wdACl8JKCyOvmFf0b6/Y/v1MeHOB8AExayhAhAku35gs6WVJDqw/w9RgJKjQH4UZ/o12/hX2e4WPatLhnhtABMECMAQArNeq3PAGjXaPMrkl/WJH7cp/HaOqdXfeJqHvULJB0BAEgha7Sjvf53ffrfqiZX/GujBXvufau+OdTJAJgKAgCQRl7zMcC9RgIq67Fe7bcHiv924um6ebgTATAtBAAghZxqPwQU2l5vK60p6p/yDSv+x22BR/0CaUIAAFLIOG1vDwDtIwHVkmSrIy7869Zn7+cCvOkTb9GTw58JgGkhAABpZLS98TL09r+1ycz9O+mjn9ipB0Y5DQDTQwAA0sjT+S7kp4Cl+u1/a/U38S78+9a2qnaNdhIApokAAKSQs3pWrykAJ6kcnP+PZ+HfhiyP+gXSigAApJBT8zbAblMA1Q3J2dhX/V9z75U86hdIKwIAkEZG5/W6/a+8NmTxH/YpgUZ/cO8V+o1xTgHAdPEoYCBlvvAFFZzRtm5tjccCNx4A1NgWafGXlsuGR/0CaccIAJAyjxR1rhcI7x0jAU6qbHTcphdV8bcyes2n36KjY58IgKkiAAAp4xVrTwEMvf1vQ7JWI8/9d+wTeC2j9957hR4a6wQAJAIBAEgZ58KfAuiMVAoO/0tDFf+eowHSXzz7qG4a7+gBJAUBAEgbTzua1blzJKBcv/8/4oV/J/yqXrV7t6oRnAGABCAAACljrLY3Fvu1c7Z+C2DUc/9Gb77/Kj0R0SkASAACAJAyttD8JcB2lTXJBt5HVPzv+cRb9DsRHDqABCEAAGnjtCOsafPxvxprpX/w9SOFGV0z/kEDSBqeAwCkTY8AUK4/lDei4l9yThffc6kCsQJAVjACAKTPM7pttH7tFkD1Kv7D/SDQtfddob+P7rABJAkjAEDKWOnp3baX19VSyBvF3wWKf/3nezteNz63yehPPvkWfTTygweQGIwAACnjSed1215erf05xE/51j7T+Xp/cUavcQpbagggCwgAQIrs+aaKMtrSra28FsncvzXSa+65VEciP3gAicIUAJAiMyVtV8sT/mtsVao0HujJFEgAAASySURBVNEzxsI/J73vE2/RN+I4dgDJwggAkCJ+pfsdAKX66v8xF/791cyM3hPl8QJILkYAgBRxNiQArGnc4n/Sc/qVey5VJepjBpBMjAAAKeI8be+2vbwxYPEPf0Twm+99ix6P9mgBJBkBAEgT0/pDQJJUrdT+b8h7/JuvPX3ik2/W52I5XgCJRQAA0sRqe/sSwFL9/v9hF/5JkjP6rpnjUb9AHhEAgDQxnWsAyusjz/2XPE+//InX63RsxwsgsVgECKSJaV0D4NTlDoBBpwKcrv/Em/R3MR4tgAQjAABp4lofA1wtS76v/gv/OtcBfOX+t+iumI8WQIIRAIB0aQkALfP/gy/8WynM6nU86hfINwIAkC4tvwNQWh+6+Ftj9Mp736iVWI8SQOKxCBBIibu+ojlJS5sbnFQK/Pxvj3v8a2ojBe//5Jv19biPFUDyMQIApMSpcusdAKWSZOuD+AMW/7+eLejd8R4lgLRgBABICVtsfQjQ5tP/Bhj+d9IZ4+kVPOoXQAMjAEBK2LZbADeCw/9S76kAozfdf5m+G/cxAkgPRgCAtAj8EJBzUrlUfy31LP7O0/2fuky/NZmDBJAWjAAAaeGaAaC0UZv/D7nHv1n8jR4tzOjKCR4lgJQgAABpEZgCKG0MtPCv5Hn65ft41C+ALpgCANJjMwBslJob21b6B1+/7f5L9b8mdnQAUoURACA9dkiStVKpXNsQWvydvvrpN+nOiR8hgNQgAADpsUOqP/zH9bzyP2Qcj/oF0BtTAEB6PF2qDf+78IV/1hi98v7LdXDiRwcgVRgBANJjuyStb9TedFv4Z4w+eP9lenDSBwYgfRgBAFJgzx9rUdK8b6VqJXT4/29Wz9GvTecIAaQNIwBAChSczpekjXXJdi/+Z5ynVzzwcpWncoAAUocAAKSAX38GwEajvHcu/Hvzpy/Rv0zl4ACkEgEASIP6UwDX68//DxZ/K/3mpy/TZ6d2bABSiQAApIAx2u5bna76HVf+j9my3jrNYwOQTgQAIA2MdpQqOrr5wz+14l9xRq/47Ft1aspHByCFuAsASAHntH19TRvB4X/j6e2fvkR/OdUDA5BajAAA6bB9rSwvMPz/p899SrdP84AApBsBAEiHI5WKzpYkGR2y0mt375ad8jEBSDGmAIAUMNI/yegcGTkZveEzl+jAtI8JQLoxAgCkQKmqvTIqyOlDn75Efzzt4wGQfowAACmwclTHnPS3G+foHdM+FgDZwAgAkAKViuQ7/SqP+gUQFeMcPxkOAEDeMAIAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADlEAAAAIIcIAAAA5BABAACAHCIAAACQQwQAAAByiAAAAEAOEQAAAMghAgAAADn0/wMVgLyBfuTpLwAAAABJRU5ErkJggg==",
    //       W4HfqT: 200,
    //       eKHLA4: 200,
    //       YO8o45: 1,
    //       FtanTl: "",
    //       BirQuN: true,
    //       hvIhE7: "Teste de campo",
    //       xcyqxt: true,
    //       wnd8Vr: 0,
    //       REFTqz: 100,
    //       xf5T0F: "texto de ajuda",
    //     },
    //   },
    //   SUCCESS: {
    //     screen: "SUCCESS",
    //     data: {
    //       extension_message_response: {
    //         params: {
    //           flow_token: "flows-builder-54bae7a1",
    //           token: "teste de token",
    //         },
    //       },
    //     },
    //   },
    // };

    // const data = await encryptResponse(
    //   SCREEN_RESPONSES.SUCCESS,
    //   body.encrypted_aes_key,
    //   body.initial_vector
    // );

    return new Response(
      "mDZs3k0V/AyzOS8fVpg66pK0v0ZK2wF1b870UZSnH7xDIWUmcT4Wcns3FjD/17tzQoMMYz/ZBmSJO6YX+tiXzubaErnSkY5wyTL5Cu5yVyZ8/ru4LcV1IL7yc6L90KY1FuqpyJyrrXPlD6rDcKU3p7D51hCk/UmgPfoAB5IDclrM01FieXuXF/4Y/71tn9wxGp1xJXTzCHhQ6CXJFhyhqaf+9Yq3k4tyIw/7CSfS0wcRNy6xrCCUje5H23CInRildI+VwcyeLLmzBsGUbsWoZAnNxfZcGIMSbHn6HS5RNj9lXQMBqzKfe9qa9rkzlEjsVC/wEzFdOQVWXQLV6uK8sw=",
      {
        status: 200,
      }
    );
  } catch (error) {
    console.log("Error parsing JSON body:", error);
    throw error;
  }
}

function encryptResponse(
  response: any,
  aesKeyBuffer: Buffer,
  initialVectorBuffer: Buffer
) {
  // Flip the initialization vector
  const flipped_iv = [];
  for (const pair of initialVectorBuffer.entries()) {
    flipped_iv.push(~pair[1]);
  }
  // Encrypt the response data
  const cipher = crypto.createCipheriv(
    "aes-128-gcm",
    aesKeyBuffer,
    Buffer.from(flipped_iv)
  );
  return Buffer.concat([
    cipher.update(JSON.stringify(response), "utf-8"),
    cipher.final(),
    cipher.getAuthTag(),
  ]).toString("base64");
}

function decryptRequest(body: any, privatePem: string) {
  const { encrypted_aes_key, encrypted_flow_data, initial_vector } = body;

  // Decrypt the AES key created by the client
  const decryptedAesKey = crypto.privateDecrypt(
    {
      key: crypto.createPrivateKey(privatePem),
      padding: crypto.constants.RSA_PKCS1_OAEP_PADDING,
      oaepHash: "sha256",
    },
    Buffer.from(encrypted_aes_key, "base64")
  );

  // Decrypt the Flow data
  const flowDataBuffer = Buffer.from(encrypted_flow_data, "base64");
  const initialVectorBuffer = Buffer.from(initial_vector, "base64");

  const TAG_LENGTH = 16;
  const encrypted_flow_data_body = flowDataBuffer.subarray(0, -TAG_LENGTH);
  const encrypted_flow_data_tag = flowDataBuffer.subarray(-TAG_LENGTH);

  const decipher = crypto.createDecipheriv(
    "aes-128-gcm",
    decryptedAesKey,
    initialVectorBuffer
  );
  decipher.setAuthTag(encrypted_flow_data_tag);

  const decryptedJSONString = Buffer.concat([
    decipher.update(encrypted_flow_data_body),
    decipher.final(),
  ]).toString("utf-8");

  return {
    decryptedBody: JSON.parse(decryptedJSONString),
    aesKeyBuffer: decryptedAesKey,
    initialVectorBuffer,
  };
}
